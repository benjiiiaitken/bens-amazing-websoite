<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Doors - A Horror Game</title>
    <style>
        body {
            font-family: 'Courier New', Courier, monospace;
            margin: 0;
            padding: 0;
            background-color: #000;
            color: #fff;
            overflow: hidden;
            position: relative;
            background: url('static/images/background.jpg') no-repeat center center fixed;
            background-size: cover;
            animation: flicker 0.5s infinite;
        }

        @keyframes flicker {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        #game-container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            position: relative;
        }

        #room {
            background-color: rgba(34, 34, 34, 0.9);
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            width: 300px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.8);
            position: relative;
            z-index: 1;
        }

        #next-door {
            background-color: #555;
            color: #fff;
            border: none;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            position: relative;
            z-index: 1;
        }

        #next-door:hover {
            background-color: #777;
        }

        #event {
            margin-top: 20px;
            font-style: italic;
        }

        /* Styles for Rush entity */
        #rush {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(255, 0, 0, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.9);
            display: none;
            z-index: 1000;
            flex-direction: column;
            text-align: center;
        }

        #rush::before {
            content: "";
            background: url('https://static.wikia.nocookie.net/doors-ideas/images/9/99/Robert.png/revision/latest?cb=20230211202711');
            background-size: cover;
            width: 200px;
            height: 200px;
            border-radius: 50%;
            display: block;
            margin-bottom: 20px;
        }

        /* Styles for Screech entity */
        #screech {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.9);
            display: none;
            z-index: 1000;
            flex-direction: column;
            text-align: center;
        }

        #screech::before {
            content: "";
            background: url('https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/a2cd1f6c-da50-4bbe-89ac-77c7fc19e466/dfunau4-d94c8c14-fd41-403a-a304-8678a75c2a5e.png/v1/fill/w_650,h_925/roblox_doors_old_depth_full_body_png_by_demongod2022_dfunau4-fullview.png?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9OTI1IiwicGF0aCI6IlwvZlwvYTJjZDFmNmMtZGE1MC00YmJlLTg5YWMtNzdjN2ZjMTllNDY2XC9kZnVuYXU0LWQ5NGM4YzE0LWZkNDEtNDAzYS1hMzA0LTg2NzhhNzVjMmE1ZS5wbmciLCJ3aWR0aCI6Ijw9NjUwIn1dXSwiYXVkIjpbInVybjpzZXJ2aWNlOmltYWdlLm9wZXJhdGlvbnMiXX0.eheawUDHBE4mCSQw6_A2Mdd-jb-enrX1vPmiACLnmsE');
            background-size: cover;
            width: 200px;
            height: 200px;
            border-radius: 50%;
            display: block;
            margin-bottom: 20px;
        }

        /* Styles for Dread entity */
        #dread {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.9);
            display: none;
            z-index: 1000;
            flex-direction: column;
            text-align: center;
        }

        #dread::before {
            content: "";
            background: url('https://static.wikia.nocookie.net/doors-game/images/c/c9/Dread.png/revision/latest?cb=20230909101425&path-prefix=es');
            background-size: cover;
            width: 200px;
            height: 200px;
            border-radius: 50%;
            display: block;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div id="rush">
        <div>RUSH!</div>
    </div>
    <div id="screech">
        <div>SCREECH!</div>
    </div>
    <div id="dread">
        <div>DREAD!</div>
    </div>
    <div id="game-container">
        <div id="room">
            <h1 id="room-title">Room 1</h1>
            <button id="next-door">Open Next Door</button>
            <div id="event"></div>
        </div>
    </div>
    <audio id="rush-sound" src="static/sounds/rush.mp3"></audio>
    <audio id="screech-sound" src="static/sounds/screech.mp3"></audio>
    <audio id="dread-sound" src="static/sounds/dread.mp3"></audio>
    <audio id="ambient-sound" src="static/sounds/ambient.mp3" loop></audio>
    <audio id="jump-scare-sound" src="static/sounds/jump-scare.mp3"></audio>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const roomTitle = document.getElementById('room-title');
            const eventDiv = document.getElementById('event');
            const nextDoorButton = document.getElementById('next-door');
            const rushDiv = document.getElementById('rush');
            const screechDiv = document.getElementById('screech');
            const dreadDiv = document.getElementById('dread');
            const rushSound = document.getElementById('rush-sound');
            const screechSound = document.getElementById('screech-sound');
            const dreadSound = document.getElementById('dread-sound');
            const ambientSound = document.getElementById('ambient-sound');
            const jumpScareSound = document.getElementById('jump-scare-sound');

            let roomNumber = 1;
            let floorNumber = 1;
            let doorCount = 0;
            let startTime = Date.now();
            let isGameOver = false;
            let screechTimeout;

            const events = [
                "You hear a distant scream.",
                "The lights flicker ominously.",
                "You find a mysterious note on the floor.",
                "A cold draft chills you to the bone.",
                "A shadow moves quickly in the corner of your eye."
            ];

            function openNextDoor() {
                if (isGameOver) return;

                doorCount++;
                roomNumber++;
                roomTitle.textContent = `Room ${roomNumber}`;

                // Random event
                if (Math.random() < 0.1) {
                    eventDiv.textContent = events[Math.floor(Math.random() * events.length)];
                } else {
                    eventDiv.textContent = "";
                }

                // Check for Dread at door 30
                if (roomNumber === 30 && Math.random() < 0.01) {
                    triggerDread();
                } else if (roomNumber % 10 === 0) {
                    document.body.style.backgroundColor = '#222';
                    setTimeout(() => document.body.style.backgroundColor = '#000', 500);
                } else if (Math.random() > 0.7) {
                    document.body.style.backgroundColor = '#000';
                    setTimeout(() => document.body.style.backgroundColor = '#333', 300);
                }

                // Transition to Floor 2 after Room 100
                if (floorNumber === 1 && roomNumber > 100) {
                    transitionToFloor(2);
                }
            }

            function transitionToFloor(newFloor) {
                floorNumber = newFloor;
                roomNumber = 1;
                roomTitle.textContent = `Floor ${floorNumber} - Room ${roomNumber}`;
                eventDiv.textContent = "You have transitioned to a new floor.";
                
                // Optional: Add a special effect or message for the transition
                document.body.style.backgroundColor = '#444';
                setTimeout(() => document.body.style.backgroundColor = '#000', 500);
            }

            function triggerRush() {
                isGameOver = true;
                rushDiv.style.display = 'flex'; // Show Rush entity
                rushSound.play(); // Play Rush sound
                setTimeout(() => {
                    rushDiv.style.display = 'none'; // Hide Rush after a short period
                    resetGame(); // Reset game state
                }, 3000); // Show for 3 seconds
            }

            function showScreech() {
                if (isGameOver) return;
                screechDiv.style.display = 'flex';
                screechSound.play();
                clearTimeout(screechTimeout);

                screechTimeout = setTimeout(() => {
                    if (!isGameOver) {
                        gameOver(); // Kill player if not clicked within 5 seconds
                    }
                }, 5000); // Show Screech for 5 seconds

                document.addEventListener('click', handleScreechClick);
            }

            function handleScreechClick() {
                if (screechDiv.style.display === 'flex') {
                    screechDiv.style.display = 'none';
                    clearTimeout(screechTimeout); // Stop the game over timer
                    document.removeEventListener('click', handleScreechClick);
                }
            }

            function triggerDread() {
                isGameOver = true;
                dreadDiv.style.display = 'flex'; // Show Dread entity
                dreadSound.play(); // Play Dread sound
                setTimeout(() => {
                    dreadDiv.style.display = 'none'; // Hide Dread after a short period
                    resetGame(); // Reset game state
                }, 3000); // Show for 3 seconds
            }

            function gameOver() {
                isGameOver = true;
                screechDiv.style.display = 'none'; // Hide Screech immediately
                rushDiv.style.display = 'none'; // Hide Rush if visible
                dreadDiv.style.display = 'none'; // Hide Dread if visible
                nextDoorButton.disabled = true; // Disable button
                jumpScareSound.play(); // Play jump scare sound
                alert('You have been caught!');
                resetGame(); // Reset game state
            }

            function resetGame() {
                roomNumber = 1;
                floorNumber = 1;
                doorCount = 0;
                startTime = Date.now();
                isGameOver = false;
                nextDoorButton.disabled = false;
                roomTitle.textContent = `Room ${roomNumber}`;
                eventDiv.textContent = "";
                document.body.style.backgroundColor = '#000'; // Reset background color
            }

            nextDoorButton.addEventListener('click', openNextDoor);

            // Start ambient sound
            ambientSound.play();
        });
    </script>
</body>
</html>
