<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Doors - A Horror Game</title>
    <style>
        body {
            font-family: 'Courier New', Courier, monospace;
            margin: 0;
            padding: 0;
            color: #fff;
            overflow: hidden;
            position: relative;
            background-color: #000; /* Default background color */
            transition: background-color 0.5s ease; /* Smooth background color transition */
        }

        #game-container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            position: relative;
        }

        #room {
            background-color: rgba(34, 34, 34, 0.9);
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            width: 300px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.8);
            position: relative;
            z-index: 1;
        }

        #next-door {
            background-color: #555;
            color: #fff;
            border: none;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            position: relative;
            z-index: 1;
        }

        #next-door:hover {
            background-color: #777;
        }

        #event {
            margin-top: 20px;
            font-style: italic;
        }

        /* Styles for Rush entity */
        #rush {
            position: absolute;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(255, 0, 0, 0.9);
            color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 5em;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.9);
            display: none;
            z-index: 1000;
            animation: jitter 0.1s infinite;
        }

        @keyframes jitter {
            0% { transform: translateX(0) rotate(0); }
            25% { transform: translateX(-10px) rotate(-1deg); }
            50% { transform: translateX(10px) rotate(1deg); }
            75% { transform: translateX(-10px) rotate(-1deg); }
            100% { transform: translateX(0) rotate(0); }
        }

        /* Styles for Eyes entity */
        #eyes {
            position: absolute;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.9);
            color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 5em;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.9);
            display: none;
            z-index: 1000;
            animation: eyesJitter 0.1s infinite;
        }

        @keyframes eyesJitter {
            0% { transform: translateY(0) rotate(0); }
            25% { transform: translateY(-10px) rotate(-1deg); }
            50% { transform: translateY(10px) rotate(1deg); }
            75% { transform: translateY(-10px) rotate(-1deg); }
            100% { transform: translateY(0) rotate(0); }
        }

        /* Styles for Dread entity */
        #dread {
            position: absolute;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.9);
            color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 5em;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.9);
            display: none;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <div id="rush">RUSH FACE</div>
    <div id="eyes">EYES</div>
    <div id="dread">DREAD</div>
    <div id="game-container">
        <div id="room">
            <h1 id="room-title">Room 1</h1>
            <button id="next-door">Open Next Door</button>
            <div id="event"></div>
        </div>
    </div>
    <audio id="rush-sound" src="static/sounds/rush.mp3"></audio>
    <audio id="eyes-sound" src="static/sounds/eyes.mp3"></audio>
    <audio id="ambient-sound" src="static/sounds/ambient.mp3" loop></audio>
    <audio id="jump-scare-sound" src="static/sounds/jump-scare.mp3"></audio>
    <audio id="dread-sound" src="static/sounds/dread.mp3"></audio>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const roomTitle = document.getElementById('room-title');
            const eventDiv = document.getElementById('event');
            const nextDoorButton = document.getElementById('next-door');
            const rushDiv = document.getElementById('rush');
            const eyesDiv = document.getElementById('eyes');
            const dreadDiv = document.getElementById('dread');
            const rushSound = document.getElementById('rush-sound');
            const eyesSound = document.getElementById('eyes-sound');
            const ambientSound = document.getElementById('ambient-sound');
            const jumpScareSound = document.getElementById('jump-scare-sound');
            const dreadSound = document.getElementById('dread-sound');

            let roomNumber = 1;
            let floorNumber = 1;
            let doorCount = 0;
            let startTime = Date.now();
            let isGameOver = false;
            let eyesVisible = false;
            let dreadVisible = false;

            const events = [
                "You hear a distant scream.",
                "The lights flicker ominously.",
                "You find a mysterious note on the floor.",
                "A cold draft chills you to the bone.",
                "A shadow moves quickly past you.",
                "The floor creaks loudly.",
                "An eerie whisper fills the room.",
                "You feel an unseen presence.",
                "The walls seem to close in.",
                "A chilling breeze brushes your neck.",
                // Add more events here
            ];

            function getRandomEvent() {
                const randomIndex = Math.floor(Math.random() * events.length);
                return events[randomIndex];
            }

            function changeBackgroundColor() {
                // Change background color between black and shades of grey
                const shadesOfGrey = ['#000', '#333', '#666', '#999', '#ccc'];
                const randomShade = shadesOfGrey[Math.floor(Math.random() * shadesOfGrey.length)];
                document.body.style.backgroundColor = randomShade;
            }

            function openNextDoor() {
                if (isGameOver) return;

                const currentTime = Date.now();
                const elapsedTime = (currentTime - startTime) / 1000; // in seconds

                // Check for Rush trigger
                if (doorCount >= 10 && elapsedTime <= 10) {
                    triggerRush();
                    return;
                }

                // Check for Eyes trigger
                if (doorCount % 30 === 0 && doorCount > 0) {
                    showEyes();
                }

                // Check for Dread trigger
                if (doorCount === 30 && Math.random() < 0.01) {
                    showDread();
                    return;
                }

                roomNumber++;
                doorCount++;
                roomTitle.textContent = `Room ${roomNumber}`;
                eventDiv.textContent = getRandomEvent();

                // Reset timer and door count if more than 10 seconds have passed
                if (elapsedTime > 10) {
                    startTime = currentTime;
                    doorCount = 1; // Start counting again
                }

                // Spooky effects
                changeBackgroundColor();

                // Transition to Floor 2 after Room 100
                if (floorNumber === 1 && roomNumber > 100) {
                    transitionToFloor(2);
                }
            }

            function transitionToFloor(newFloor) {
                floorNumber = newFloor;
                roomNumber = 1;
                roomTitle.textContent = `Floor ${floorNumber} - Room ${roomNumber}`;
                eventDiv.textContent = "You have transitioned to a new floor.";
                
                // Reset the background color for the new floor
                changeBackgroundColor();
            }

            function triggerRush() {
                rushDiv.style.display = 'flex';
                rushSound.play();
                setTimeout(() => {
                    rushDiv.style.display = 'none';
                }, 2000); // Show Rush for 2 seconds
                gameOver();
            }

            function showEyes() {
                eyesDiv.style.display = 'flex';
                eyesSound.play();
                setTimeout(() => {
                    eyesDiv.style.display = 'none';
                }, 2000); // Show Eyes for 2 seconds
            }

            function showDread() {
                dreadDiv.style.display = 'flex';
                dreadSound.play();
                setTimeout(() => {
                    dreadDiv.style.display = 'none';
                }, 2000); // Show Dread for 2 seconds
                gameOver();
            }

            function gameOver() {
                isGameOver = true;
                nextDoorButton.disabled = true;
                eventDiv.textContent = "Game Over!";
                jumpScareSound.play();
            }

            nextDoorButton.addEventListener('click', openNextDoor);
            ambientSound.play();
        });
    </script>
</body>
</html>
